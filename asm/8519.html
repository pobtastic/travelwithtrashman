<!DOCTYPE html>
<html>
<head>
<title>Travel With Trashman: Routine at 8519</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="84D5.html">84D5</a>
</td>
<td class="up">Up: <a href="../maps/all.html#8519">Map</a></td>
<td class="next">
Next: <a href="8548.html">8548</a>
</td>
</tr>
</table>
<div class="description">8519: Select Yes/ No</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="84D5.html">Select1Or2PlayerGame</a> and <a href="883C.html">Handler_SubGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Select_Yes/No</td>
<td class="address-2"><span id="8519"></span>8519</td>
<td class="instruction">CALL <a href="8479.html">PauseCheck</a></td>
<td class="comment-1" rowspan="1">Call <a href="8479.html">PauseCheck</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="851c"></span>
<div class="comments">
<div class="paragraph">
Set up to print "No".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Select_No</td>
<td class="address-2"><span id="851c"></span>851C</td>
<td class="instruction">LD HL,$8C10</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="8C10.html">Messaging_No</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="851f"></span>851F</td>
<td class="instruction">CALL <a href="8519.html#852f">Select_GetInput</a></td>
<td class="comment-1" rowspan="1">Call <a href="8519.html#852f">Select_GetInput</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8522"></span>8522</td>
<td class="instruction">JR Z,<a href="8519.html#8526">Select_Yes</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="8519.html#8526">Select_Yes</a> if "Yes" was selected.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8524"></span>8524</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8525"></span>8525</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8526"></span>
<div class="comments">
<div class="paragraph">
Set up to print "Yes".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Select_Yes</td>
<td class="address-2"><span id="8526"></span>8526</td>
<td class="instruction">LD HL,$8C23</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="8C23.html">Messaging_Yes</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8529"></span>8529</td>
<td class="instruction">CALL <a href="8519.html#852f">Select_GetInput</a></td>
<td class="comment-1" rowspan="1">Call <a href="8519.html#852f">Select_GetInput</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="852c"></span>852C</td>
<td class="instruction">JR Z,<a href="8519.html#851c">Select_No</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="8519.html#851c">Select_No</a> if "No" was selected".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="852e"></span>852E</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="852f"></span>
<div class="comments">
<div class="paragraph">
Prints the current choice, and handles the player input.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Select_GetInput</td>
<td class="address-2"><span id="852f"></span>852F</td>
<td class="instruction">LD DE,$509B</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=509B (screen buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8532"></span>8532</td>
<td class="instruction">CALL <a href="8A3D.html">Print_String</a></td>
<td class="comment-1" rowspan="1">Call <a href="8A3D.html">Print_String</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="8535"></span>
<div class="comments">
<div class="paragraph">
Keep looping round until the player either chooses, or changes their choice.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Select_Yes/No_Loop</td>
<td class="address-2"><span id="8535"></span>8535</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-1" rowspan="2">Call <a href="8055.html">8055</a> with a count of 0A.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8537"></span>8537</td>
<td class="instruction">CALL <a href="8055.html">$8055</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="853a"></span>853A</td>
<td class="instruction">CALL <a href="85E7.html">Handler_Controls</a></td>
<td class="comment-1" rowspan="1">Call <a href="85E7.html">Handler_Controls</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="853d"></span>853D</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the control byte.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="853e"></span>853E</td>
<td class="instruction">AND %00101000</td>
<td class="comment-1" rowspan="1">Keep only bits 3 ("down") and 5 ("fire").</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8540"></span>8540</td>
<td class="instruction">CP $08</td>
<td class="comment-1" rowspan="2">Return if "down" was pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8542"></span>8542</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8543"></span>8543</td>
<td class="instruction">CP $28</td>
<td class="comment-1" rowspan="2">Jump to <a href="8519.html#8535">Select_Yes/No_Loop</a> if there was no input from the player.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8545"></span>8545</td>
<td class="instruction">JR Z,<a href="8519.html#8535">Select_Yes/No_Loop</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="8547"></span>8547</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Else, "fire" was pressed - just return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="84D5.html">84D5</a>
</td>
<td class="up">Up: <a href="../maps/all.html#8519">Map</a></td>
<td class="next">
Next: <a href="8548.html">8548</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 New Generation Software &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.4.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/travelwithtrashman/">Source code</a>.</div>
<div><a href="asm/8519.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>