<!DOCTYPE html>
<html>
<head>
<title>Travel With Trashman: Routine at 34633</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="34406.html">34406</a>
</td>
<td class="up">Up: <a href="../maps/all.html#34633">Map</a></td>
<td class="next">
Next: <a href="34852.html">34852</a>
</td>
</tr>
</table>
<div class="description">34633: Handler: Location Choice</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="32771.html">GameInitialise</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Handler_LocationChoice</td>
<td class="address-2"><span id="34633"></span>34633</td>
<td class="instruction">LD A,(30737)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30737.html">TemporaryScreenLocation</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34636"></span>34636</td>
<td class="instruction">OR %00001000</td>
<td class="comment-1" rowspan="1">Set bit 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34638"></span>34638</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34639"></span>34639</td>
<td class="instruction">LD A,136</td>
<td class="comment-1" rowspan="2">Write 136 to *<a href="30737.html">TemporaryScreenLocation</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34641"></span>34641</td>
<td class="instruction">LD (30737),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34644"></span>34644</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34645"></span>34645</td>
<td class="instruction">CALL <a href="34864.html">Print_ArrowSymbol</a></td>
<td class="comment-1" rowspan="1">Call <a href="34864.html">Print_ArrowSymbol</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34648"></span>34648</td>
<td class="instruction">CALL <a href="33913.html">PauseCheck</a></td>
<td class="comment-1" rowspan="1">Call <a href="33913.html">PauseCheck</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_LocationChoice_InputLoop</td>
<td class="address-2"><span id="34651"></span>34651</td>
<td class="instruction">LD B,10</td>
<td class="comment-1" rowspan="2">Call <a href="32853.html">32853</a> with a count of 10.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34653"></span>34653</td>
<td class="instruction">CALL <a href="32853.html">32853</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34656"></span>34656</td>
<td class="instruction">CALL <a href="34279.html">Handler_Controls</a></td>
<td class="comment-1" rowspan="1">Call <a href="34279.html">Handler_Controls</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34659"></span>34659</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="3">Jump to <a href="34633.html#34808">ProcessLocationChoiceInput_Up</a> if "up" was pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34660"></span>34660</td>
<td class="instruction">CP 24</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34662"></span>34662</td>
<td class="instruction">JP Z,<a href="34633.html#34808">ProcessLocationChoiceInput_Up</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34665"></span>34665</td>
<td class="instruction">CP 8</td>
<td class="comment-1" rowspan="2">Jump to <a href="34633.html#34831">ProcessLocationChoiceInput_Down</a> if "down" was pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34667"></span>34667</td>
<td class="instruction">JP Z,<a href="34633.html#34831">ProcessLocationChoiceInput_Down</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34670"></span>34670</td>
<td class="instruction">CP 32</td>
<td class="comment-1" rowspan="2">Jump to <a href="34633.html#34651">Handler_LocationChoice_InputLoop</a> if anything other than "fire" was pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34672"></span>34672</td>
<td class="instruction">JR NZ,<a href="34633.html#34651">Handler_LocationChoice_InputLoop</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34674"></span>
<div class="comments">
<div class="paragraph">
Process the player pressing "fire".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34674"></span>34674</td>
<td class="instruction">LD IX,(61426)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=*<a href="61426.html">Pointer_ActivePlayer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34678"></span>34678</td>
<td class="instruction">LD L,(IX+8)</td>
<td class="comment-1" rowspan="2">Fetch the players current location and store it in <span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34681"></span>34681</td>
<td class="instruction">LD H,(IX+9)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34684"></span>34684</td>
<td class="instruction">LD BC,4</td>
<td class="comment-1" rowspan="1">Set the increment between destinations in <span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34687"></span>34687</td>
<td class="instruction">LD A,(30737)</td>
<td class="comment-1" rowspan="2">Set the selected position from *<a href="30737.html">TemporaryScreenLocation</a> in <span class="register">E</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34690"></span>34690</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34691"></span>34691</td>
<td class="instruction">LD A,136</td>
<td class="comment-1" rowspan="1">Set the position of the top destination in <span class="register">A</span>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34693"></span>
<div class="comments">
<div class="paragraph">
Keep looping until the selected destination matches <span class="register">A</span>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">CalculateSelectedDestination_Loop</td>
<td class="address-2"><span id="34693"></span>34693</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1">Move <span class="register">HL</span> to the next destination.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34694"></span>34694</td>
<td class="instruction">CP E</td>
<td class="comment-1" rowspan="2">Jump to <a href="34633.html#34701">FoundSelectedDestination</a> if <span class="register">A</span> is equal to <span class="register">E</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34695"></span>34695</td>
<td class="instruction">JR Z,<a href="34633.html#34701">FoundSelectedDestination</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34697"></span>34697</td>
<td class="instruction">ADD A,32</td>
<td class="comment-1" rowspan="1">Move down one line.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34699"></span>34699</td>
<td class="instruction">JR <a href="34633.html#34693">CalculateSelectedDestination_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34693">CalculateSelectedDestination_Loop</a>.</td>
</tr>
<tr>
<td class="asm-label">FoundSelectedDestination</td>
<td class="address-2"><span id="34701"></span>34701</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34702"></span>34702</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34703"></span>34703</td>
<td class="instruction">LD A,96</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=96.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34705"></span>34705</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34706"></span>34706</td>
<td class="instruction">JP NC,<a href="34876.html">Handler_SubGame</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34876.html">Handler_SubGame</a> if <span class="register">A</span> is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34709"></span>34709</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34710"></span>34710</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34711"></span>34711</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34712"></span>34712</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34713"></span>34713</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34714"></span>34714</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34715"></span>34715</td>
<td class="instruction">LD L,(IX+13)</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=*<span class="register">IX</span>+13.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34718"></span>34718</td>
<td class="instruction">LD H,(IX+14)</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=*<span class="register">IX</span>+14.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34721"></span>34721</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Set flags.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34722"></span>34722</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>-=<span class="register">DE</span> (with carry).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34724"></span>34724</td>
<td class="instruction">JR C,<a href="34633.html#34783">NotEnoughMoneyToFly</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34783">NotEnoughMoneyToFly</a> if <span class="register">HL</span> is lower.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34726"></span>34726</td>
<td class="instruction">LD (IX+8),C</td>
<td class="comment-1" rowspan="1">Write <span class="register">C</span> to *<span class="register">IX</span>+8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34729"></span>34729</td>
<td class="instruction">LD (IX+9),B</td>
<td class="comment-1" rowspan="1">Write <span class="register">B</span> to *<span class="register">IX</span>+9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34732"></span>34732</td>
<td class="instruction">LD HL,2</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=0002.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34735"></span>34735</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>+=<span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34736"></span>34736</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34737"></span>34737</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34738"></span>34738</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34739"></span>34739</td>
<td class="instruction">LD (30727),BC</td>
<td class="comment-1" rowspan="1">Write <span class="register">BC</span> to *<a href="30727.html">30727</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34743"></span>34743</td>
<td class="instruction">LD HL,(61426)</td>
<td class="comment-1" rowspan="3"><span class="register">HL</span>=*<a href="61426.html">Pointer_ActivePlayer</a>+0013.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34746"></span>34746</td>
<td class="instruction">LD DE,13</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34749"></span>34749</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34750"></span>34750</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Exchange the <span class="register">DE</span> and <span class="register">HL</span> registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34751"></span>34751</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34752"></span>34752</td>
<td class="instruction">LD B,2</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34754"></span>34754</td>
<td class="instruction">CALL <a href="38654.html">SpendMoney</a></td>
<td class="comment-1" rowspan="1">Call <a href="38654.html">SpendMoney</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34757"></span>34757</td>
<td class="instruction">DEC DE</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">DE</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34758"></span>34758</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Exchange the <span class="register">DE</span> and <span class="register">HL</span> registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34759"></span>34759</td>
<td class="instruction">LD DE,16443</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=16443 (screen buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34762"></span>34762</td>
<td class="instruction">LD BC,514</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=0514.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34765"></span>34765</td>
<td class="instruction">CALL <a href="38674.html">PrintNumbers</a></td>
<td class="comment-1" rowspan="1">Call <a href="38674.html">PrintNumbers</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34768"></span>34768</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34769"></span>34769</td>
<td class="instruction">LD HL,61434</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="61434.html">GameState_1</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34772"></span>34772</td>
<td class="instruction">SET 7,(HL)</td>
<td class="comment-1" rowspan="1">Set bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34774"></span>34774</td>
<td class="instruction">CALL <a href="33339.html">Messaging_GenerateTicker</a></td>
<td class="comment-1" rowspan="1">Call <a href="33339.html">Messaging_GenerateTicker</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34777"></span>34777</td>
<td class="instruction">CALL <a href="35425.html">ClearMenuScreenAreas</a></td>
<td class="comment-1" rowspan="1">Call <a href="35425.html">ClearMenuScreenAreas</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34780"></span>34780</td>
<td class="instruction">JP <a href="35180.html">35180</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="35180.html">35180</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34783"></span>
<div class="comments">
<div class="paragraph">
Prints "No DiscountsAllowed".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">NotEnoughMoneyToFly</td>
<td class="address-2"><span id="34783"></span>34783</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1">Restore <span class="register">DE</span> from the stack.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34784"></span>
<div class="comments">
<div class="paragraph">
Prints "No ".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34784"></span>34784</td>
<td class="instruction">LD HL,35856</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="35856.html">Messaging_No</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34787"></span>34787</td>
<td class="instruction">LD DE,20643</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=20643 (screen buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34790"></span>34790</td>
<td class="instruction">CALL <a href="35389.html">Print_String</a></td>
<td class="comment-1" rowspan="1">Call <a href="35389.html">Print_String</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34793"></span>
<div class="comments">
<div class="paragraph">
Prints "Discounts".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34793"></span>34793</td>
<td class="instruction">LD DE,20672</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=20672 (screen buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34796"></span>34796</td>
<td class="instruction">CALL <a href="35389.html">Print_String</a></td>
<td class="comment-1" rowspan="1">Call <a href="35389.html">Print_String</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34799"></span>
<div class="comments">
<div class="paragraph">
Prints "Allowed".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34799"></span>34799</td>
<td class="instruction">LD DE,20705</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=20705 (screen buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34802"></span>34802</td>
<td class="instruction">CALL <a href="35389.html">Print_String</a></td>
<td class="comment-1" rowspan="1">Call <a href="35389.html">Print_String</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34805"></span>34805</td>
<td class="instruction">JP <a href="34633.html#34651">Handler_LocationChoice_InputLoop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34651">Handler_LocationChoice_InputLoop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34808"></span>
<div class="comments">
<div class="paragraph">
Process the player pressing "up".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ProcessLocationChoiceInput_Up</td>
<td class="address-2"><span id="34808"></span>34808</td>
<td class="instruction">CALL <a href="34852.html">Erase_ArrowSymbol</a></td>
<td class="comment-1" rowspan="1">Call <a href="34852.html">Erase_ArrowSymbol</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34811"></span>34811</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34812"></span>34812</td>
<td class="instruction">LD A,(30737)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30737.html">TemporaryScreenLocation</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34815"></span>34815</td>
<td class="instruction">CP 136</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 136.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34817"></span>34817</td>
<td class="instruction">JR Z,<a href="34633.html#34849">Handler_LocationChoice_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34849">Handler_LocationChoice_1</a> if <span class="register">A</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34819"></span>34819</td>
<td class="instruction">SUB 32</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=32.</td>
</tr>
<tr>
<td class="asm-label">UpdateDestinationChoice</td>
<td class="address-2"><span id="34821"></span>34821</td>
<td class="instruction">LD (30737),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="30737.html">TemporaryScreenLocation</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34824"></span>34824</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34825"></span>34825</td>
<td class="instruction">CALL <a href="34864.html">Print_ArrowSymbol</a></td>
<td class="comment-1" rowspan="1">Call <a href="34864.html">Print_ArrowSymbol</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34828"></span>34828</td>
<td class="instruction">JP <a href="34633.html#34651">Handler_LocationChoice_InputLoop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34651">Handler_LocationChoice_InputLoop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34831"></span>
<div class="comments">
<div class="paragraph">
Process the player pressing "down".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ProcessLocationChoiceInput_Down</td>
<td class="address-2"><span id="34831"></span>34831</td>
<td class="instruction">CALL <a href="34852.html">Erase_ArrowSymbol</a></td>
<td class="comment-1" rowspan="1">Call <a href="34852.html">Erase_ArrowSymbol</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34834"></span>34834</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34835"></span>34835</td>
<td class="instruction">LD A,(30737)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30737.html">TemporaryScreenLocation</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34838"></span>34838</td>
<td class="instruction">CP C</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34839"></span>34839</td>
<td class="instruction">JR Z,<a href="34633.html#34845">Handler_LocationChoice_0</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34845">Handler_LocationChoice_0</a> if <span class="register">A</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34841"></span>34841</td>
<td class="instruction">ADD A,32</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=32.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34843"></span>34843</td>
<td class="instruction">JR <a href="34633.html#34821">UpdateDestinationChoice</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34821">UpdateDestinationChoice</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_LocationChoice_0</td>
<td class="address-2"><span id="34845"></span>34845</td>
<td class="instruction">LD A,136</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=136.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34847"></span>34847</td>
<td class="instruction">JR <a href="34633.html#34821">UpdateDestinationChoice</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34821">UpdateDestinationChoice</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_LocationChoice_1</td>
<td class="address-2"><span id="34849"></span>34849</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34850"></span>34850</td>
<td class="instruction">JR <a href="34633.html#34821">UpdateDestinationChoice</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="34633.html#34821">UpdateDestinationChoice</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="34406.html">34406</a>
</td>
<td class="up">Up: <a href="../maps/all.html#34633">Map</a></td>
<td class="next">
Next: <a href="34852.html">34852</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 New Generation Software &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.3.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/travelwithtrashman/">Source code</a>.</div>
<div><a href="asm/34633.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>